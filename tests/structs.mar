use std::assert;

struct Point {
    x: int,
    y: int,
}

struct Rectangle {
    width: int,
    height: int,
}

struct Circle {
    radius: int,
}

struct Person {
    age: int,
    score: int,
}

fn point_sum(p: Point): int {
    p.x + p.y
}

fn rect_area(r: Rectangle): int {
    r.width * r.height
}

fn rect_perimeter(r: Rectangle): int {
    2 * (r.width + r.height)
}

fn is_adult(p: Person): bool {
    p.age >= 18
}

fn add_points(p1: Point, p2: Point): Point {
    Point { x: p1.x + p2.x, y: p1.y + p2.y }
}

fn compare_points(p1: Point, p2: Point): bool {
    p1.x == p2.x && p1.y == p2.y
}

fn scale_point(p: Point, factor: int): Point {
    Point { x: p.x * factor, y: p.y * factor }
}

@test
fn test_struct_create() {
    var p = Point { x: 5, y: 10 };
    assert(p.x == 5 && p.y == 10, "struct creation should work");
}

@test
fn test_struct_field() {
    var p = Point { x: 5, y: 10 };
    assert(p.x == 5, "struct field access should work");
}

@test
fn test_struct_mutate() {
    var p = Point { x: 5, y: 10 };
    p.x = 20;
    assert(p.x == 20, "struct field mutation should work");
}

@test
fn test_struct_param() {
    var p = Point { x: 5, y: 10 };
    var result = point_sum(p);
    assert(result == 15, "passing struct to function should work");
}

@test
fn test_struct_area() {
    var r = Rectangle { width: 5, height: 10 };
    assert(rect_area(r) == 50, "rectangle area should be 50");
}

@test
fn test_struct_perim() {
    var r = Rectangle { width: 5, height: 10 };
    assert(rect_perimeter(r) == 30, "rectangle perimeter should be 30");
}

@test
fn test_struct_circle() {
    var c = Circle { radius: 5 };
    assert(c.radius == 5, "circle creation should work");
}

@test
fn test_struct_adult() {
    var alice = Person { age: 25, score: 95 };
    assert(is_adult(alice), "adult check should work");
}

@test
fn test_struct_return() {
    var p1 = Point { x: 5, y: 10 };
    var p2 = Point { x: 3, y: 7 };
    var p3 = add_points(p1, p2);
    assert(p3.x == 8 && p3.y == 17, "returning struct from function should work");
}

@test
fn test_struct_compare() {
    var p1 = Point { x: 5, y: 10 };
    var p2 = Point { x: 5, y: 10 };
    assert(compare_points(p1, p2), "struct comparison should work");
}

@test
fn test_struct_scale() {
    var p = Point { x: 5, y: 10 };
    var scaled = scale_point(p, 2);
    assert(scaled.x == 10 && scaled.y == 20, "scaling struct should work");
}

@test
fn test_struct_multiple() {
    var p1 = Point { x: 1, y: 2 };
    var p2 = Point { x: 3, y: 4 };
    var r = Rectangle { width: 10, height: 20 };
    assert(point_sum(p1) == 3 && rect_area(r) == 200, "multiple structs should work");
}
